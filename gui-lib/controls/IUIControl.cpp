
#include "IUIControl.hpp"
#include "IUIControlRenderer.hpp"

namespace gui
{
	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	IUIControl::IUIControl(uint16_t x, uint16_t y, uint16_t w, uint16_t h, const IUIContext & context)
		:X{x}, Y{y}, Width{w}, Height{h}, _enable{true}, _visible{true}, _context{context}
	{
	}
	
	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	bool IUIControl::IsEnable() const
	{
		return _enable;
	}
	
	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	void IUIControl::SetEnable(bool enable)
	{
		_enable = enable;
	}
	
	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	bool IUIControl::IsVisible() const
	{
		return _visible;
	}
	
	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	void IUIControl::SetVisible(bool visible)
	{
		_visible = visible;
	}

	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	void IUIControl::Draw()
	{
		_context.Renderer.DrawUIControl(this);
	}

	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	bool IUIControl::IsPositionInsideControl(uint16_t x, uint16_t y) const
	{
		return ((X < x)&&((X + Width) > x))&&((Y < y)&&((Y + Height) > y));
	}

	/*--------------------------------------------------------------------------//
	//
	//--------------------------------------------------------------------------*/
	bool IUIControl::DoesOverlapRegion(uint16_t xi0, uint16_t yi0, uint16_t w, uint16_t h) const
	{
		uint16_t xi1 = xi0 + w;
		uint16_t yi1 = yi0 + h;
		uint16_t x1 = X + Width;
		uint16_t y1 = Y + Height;
		return ((X <= xi1) && (x1 >= xi0)) && ((Y <= yi1) && (y1 >= yi0));
	}
}